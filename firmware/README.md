# Gekkokapula firmware

# Files in the project
The project was originally made in Simplicity Studio.
Simplicity Studio, however, was found difficult to use for development
since a project opened on another machine was usually broken, its
configuration generators regularly broke something in the project,
and it was quite frustrating in general. Now the code can be compiled
with `make`, and Simplicity Studio is only needed to generate the
radio configuration.

*InitDevice.c* and *InitDevice.h* have been generated by
Simplicity Studio long ago based on the *\*.hwconf* file, which may
not open properly on a newer version. Other old generated files
have been removed.

A project for generating the RAIL configuration is in a different
directory, *../railconfig*. The generated files *rail_config.c*
and *rail_config.h* are compiled as a part of the program.

The application code is under src/ and inc/.

Font is from https://github.com/dhepper/font8x8/

# Compiling and flashing
See https://github.com/tejeez/efr32-template/ for instructions.

To read debug prints, use
https://gist.github.com/tejeez/ccdf3d03740bdffaf93b992b114aeb51

The first version has some problems with flashing using OpenOCD.
Halting the program and erasing the whole flash first seems to help.
Try something like:

    openocd -f board/efm32.cfg -c "reset_config none" -c init -c halt -c "flash erase_address 0 262144" -c "program gekkofirmis.elf" -c reset

Try repeating it a couple of times if it doesn't work the first time.
You can also try using Simplicity Commander (from Simplicity Studio)
in case OpenOCD doesn't work at all.
